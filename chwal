#!/bin/sh

WALLDIR="$HOME/pix/random_walls"

random(){
    WALL=`readlink -f "$(fd --type f -e jpg -e png -e jpeg . $WALLDIR | shuf | head -1q)"`
}


if [ ! -z $1 ]
then
    if [ -f $1 ]
    then
        WALL=`readlink -f $1`
    else
        random
    fi
else
    random
fi

echo "wallpaper is $WALL"

wal -i "$WALL"

echo Setting Wallpaper $WALL
[ $XDG_SESSION_TYPE = 'x11' ] && xwallpaper --zoom $WALL || swww img --resize crop --transition-step 15 --transition-fps 60 "$WALL"

ln -sf "$WALL" ~/.wallpaper.jpg
